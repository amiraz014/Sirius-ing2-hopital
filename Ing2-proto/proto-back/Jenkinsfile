pipeline {
  agent { label 'dev-back' }

  environment {
    REMOTE_URL = "https://github.com/amiraz014/Sirius-ing2-hopital.git"
    JAVA_HOME = "/usr/lib/jvm/java-17-openjdk-amd64"
  }

  stages {
    stage('Clone') {
      steps {
        git branch: 'main', url: "${env.REMOTE_URL}"
      }
    }
    stage('Install') {
      steps {
        sh '''
          cd Ing2-proto/proto-back
          mvn install
          mvn --version
        '''
      }
    }
    stage('Build') {
      steps {
        sh '''
          mvn clean package
        '''
      }
    }
    stage('Deploy') {
      steps {
        sh '''
          cd /home/devback/workspace/dev-back/Ing2-proto/proto-back/
          mvn spring-boot:run
        '''
      }
    }
  }
}
